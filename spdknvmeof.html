<!DOCTYPE html>

<html lang="en">
<!--
    SPDK NVMe-oF Target Setup Guide

```
SEO Customization Checklist:
1. Update all "https://example.com" URLs to your actual domain
2. Replace "https://example.com/images/spdk-nvmeof-guide.jpg" with actual image URL
3. Update breadcrumb navigation links to match your site structure
4. Customize meta tags in <head> section as needed
5. Add Google Analytics or other tracking code before </body> tag
6. Update canonical URL to match your hosting location
7. Consider adding your logo URL in publisher section
8. Update author information if needed
```

–>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

```
<!-- Primary Meta Tags -->
<title>SPDK NVMe-oF Target Setup Guide | Complete Ubuntu RDMA Configuration Tutorial</title>
<meta name="title" content="SPDK NVMe-oF Target Setup Guide | Complete Ubuntu RDMA Configuration Tutorial">
<meta name="description" content="Step-by-step guide to configure SPDK NVMe over Fabrics target on Ubuntu Linux with RDMA transport. Includes installation, configuration, systemd setup, and troubleshooting for high-performance storage.">
<meta name="keywords" content="SPDK, NVMe-oF, NVMe over Fabrics, RDMA, Ubuntu, Linux, storage, high-performance, InfiniBand, RoCE, tutorial, configuration, setup guide">
<meta name="author" content="Storage Performance Development Kit Guide">
<meta name="robots" content="index, follow">
<meta name="language" content="English">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:url" content="https://example.com/spdk-nvmeof-setup-guide.html">
<meta property="og:title" content="SPDK NVMe-oF Target Setup Guide | Complete Ubuntu RDMA Configuration">
<meta property="og:description" content="Complete tutorial for setting up SPDK NVMe over Fabrics target with RDMA on Ubuntu Linux. Includes step-by-step instructions, configuration examples, and troubleshooting tips.">
<meta property="og:image" content="https://example.com/images/spdk-nvmeof-guide.jpg">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-10-10T00:00:00Z">
<meta property="article:modified_time" content="2025-10-10T00:00:00Z">
<meta property="article:author" content="Storage Admin">
<meta property="article:section" content="Technology">
<meta property="article:tag" content="SPDK">
<meta property="article:tag" content="NVMe-oF">
<meta property="article:tag" content="Linux">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://example.com/spdk-nvmeof-setup-guide.html">
<meta name="twitter:title" content="SPDK NVMe-oF Target Setup Guide | Ubuntu RDMA Configuration">
<meta name="twitter:description" content="Learn how to set up SPDK NVMe over Fabrics target with RDMA on Ubuntu. Complete guide with code examples and troubleshooting.">
<meta name="twitter:image" content="https://example.com/images/spdk-nvmeof-guide.jpg">

<!-- Canonical URL -->
<link rel="canonical" href="https://example.com/spdk-nvmeof-setup-guide.html">

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "headline": "SPDK NVMe-oF Target Setup Guide for Ubuntu with RDMA",
  "description": "Complete step-by-step guide to configure SPDK NVMe over Fabrics target on Ubuntu Linux with RDMA transport for high-performance storage.",
  "image": "https://example.com/images/spdk-nvmeof-guide.jpg",
  "author": {
    "@type": "Person",
    "name": "Storage Administrator"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SPDK Documentation",
    "logo": {
      "@type": "ImageObject",
      "url": "https://example.com/logo.png"
    }
  },
  "datePublished": "2025-10-10",
  "dateModified": "2025-10-10",
  "articleSection": "Storage Technology",
  "keywords": "SPDK, NVMe-oF, RDMA, Ubuntu, Linux, storage configuration",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://example.com/spdk-nvmeof-setup-guide.html"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Setup SPDK NVMe-oF Target on Ubuntu with RDMA",
  "description": "Complete tutorial for configuring SPDK NVMe over Fabrics target with RDMA transport on Ubuntu Linux",
  "totalTime": "PT2H",
  "estimatedCost": {
    "@type": "MonetaryAmount",
    "currency": "USD",
    "value": "0"
  },
  "supply": [
    {
      "@type": "HowToSupply",
      "name": "Ubuntu Linux Server"
    },
    {
      "@type": "HowToSupply",
      "name": "RDMA-capable Network Interface Card"
    },
    {
      "@type": "HowToSupply",
      "name": "NVMe Storage Device (optional)"
    }
  ],
  "tool": [
    {
      "@type": "HowToTool",
      "name": "SPDK (Storage Performance Development Kit)"
    },
    {
      "@type": "HowToTool",
      "name": "RDMA Core Libraries"
    }
  ],
  "step": [
    {
      "@type": "HowToStep",
      "position": 1,
      "name": "Install Prerequisites",
      "text": "Install required packages including build tools, RDMA libraries, and development dependencies",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#prerequisites"
    },
    {
      "@type": "HowToStep",
      "position": 2,
      "name": "Build SPDK",
      "text": "Clone SPDK repository, configure with RDMA support, and compile the source code",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#build"
    },
    {
      "@type": "HowToStep",
      "position": 3,
      "name": "Configure NVMe-oF Target",
      "text": "Create configuration files for the NVMe-oF target using JSON or RPC methods",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#configuration"
    },
    {
      "@type": "HowToStep",
      "position": 4,
      "name": "Setup Systemd Service",
      "text": "Create and enable systemd service for automatic startup and management",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#service"
    },
    {
      "@type": "HowToStep",
      "position": 5,
      "name": "Configure Network",
      "text": "Setup RDMA network interface with proper IP addressing and MTU settings",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#network"
    },
    {
      "@type": "HowToStep",
      "position": 6,
      "name": "Connect Clients",
      "text": "Configure client systems to discover and connect to the NVMe-oF target",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#client"
    },
    {
      "@type": "HowToStep",
      "position": 7,
      "name": "Monitor and Manage",
      "text": "Setup monitoring scripts and learn management commands for the SPDK target",
      "url": "https://example.com/spdk-nvmeof-setup-guide.html#monitoring"
    }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://example.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Tutorials",
      "item": "https://example.com/tutorials"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "SPDK NVMe-oF Setup Guide"
    }
  ]
}
</script>

<!-- Preconnect to external domains for performance -->
<link rel="preconnect" href="https://spdk.io">
<link rel="preconnect" href="https://github.com">

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        background: #f5f5f5;
    }
    
    .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        background: #667eea;
        color: white;
        padding: 8px;
        text-decoration: none;
        z-index: 1000;
    }
    
    .skip-link:focus {
        top: 0;
    }
    
    .breadcrumb {
        font-size: 0.9rem;
        color: #666;
        border-bottom: 1px solid #e0e0e0;
        margin-bottom: 2rem;
    }
    
    .breadcrumb a {
        color: #667eea;
        text-decoration: none;
    }
    
    .breadcrumb a:hover {
        text-decoration: underline;
    }
    
    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    
    header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 3rem 2rem;
        text-align: center;
    }
    
    header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
    }
    
    header p {
        font-size: 1.1rem;
        opacity: 0.9;
    }
    
    nav {
        background: #2d3748;
        padding: 1rem 2rem;
        position: sticky;
        top: 0;
        z-index: 100;
    }
    
    nav ul {
        list-style: none;
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
    }
    
    nav a {
        color: white;
        text-decoration: none;
        transition: color 0.3s;
    }
    
    nav a:hover {
        color: #667eea;
    }
    
    main {
        padding: 2rem;
    }
    
    section {
        margin-bottom: 3rem;
        scroll-margin-top: 60px;
    }
    
    h2 {
        color: #667eea;
        font-size: 1.8rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 3px solid #667eea;
    }
    
    h3 {
        color: #764ba2;
        font-size: 1.3rem;
        margin: 1.5rem 0 1rem 0;
    }
    
    p {
        margin-bottom: 1rem;
    }
    
    pre {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 1.5rem;
        border-radius: 8px;
        overflow-x: auto;
        margin: 1rem 0;
        border-left: 4px solid #667eea;
    }
    
    code {
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9rem;
    }
    
    .alert {
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        border-left: 4px solid;
    }
    
    .alert-warning {
        background: #fff3cd;
        border-color: #ffc107;
        color: #856404;
    }
    
    .alert-info {
        background: #d1ecf1;
        border-color: #17a2b8;
        color: #0c5460;
    }
    
    .alert-success {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
    }
    
    ul, ol {
        margin-left: 2rem;
        margin-bottom: 1rem;
    }
    
    li {
        margin-bottom: 0.5rem;
    }
    
    .step-number {
        display: inline-block;
        background: #667eea;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        text-align: center;
        line-height: 30px;
        margin-right: 0.5rem;
        font-weight: bold;
    }
    
    footer {
        background: #2d3748;
        color: white;
        text-align: center;
        padding: 2rem;
    }
    
    .command-group {
        margin: 1.5rem 0;
    }
    
    .command-title {
        font-weight: bold;
        color: #667eea;
        margin-bottom: 0.5rem;
    }
    
    @media (max-width: 768px) {
        header h1 {
            font-size: 2rem;
        }
        
        nav ul {
            flex-direction: column;
            gap: 0.5rem;
        }
        
        main {
            padding: 1rem;
        }
    }
</style>
```

</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

```
<div class="container">
    <header>
        <h1>SPDK NVMe-oF Target Setup Guide</h1>
        <p>Complete Configuration for Ubuntu with RDMA Transport</p>
    </header>
    
    <nav aria-label="Table of Contents">
        <ul>
            <li><a href="#prerequisites">Prerequisites</a></li>
            <li><a href="#build">Build SPDK</a></li>
            <li><a href="#configuration">Configuration</a></li>
            <li><a href="#service">Systemd Service</a></li>
            <li><a href="#network">Network Setup</a></li>
            <li><a href="#client">Client Connection</a></li>
            <li><a href="#monitoring">Monitoring</a></li>
            <li><a href="#faq">FAQ</a></li>
        </ul>
    </nav>
    
    <main id="main-content" role="main">
        <!-- Breadcrumb Navigation -->
        <nav aria-label="Breadcrumb" class="breadcrumb">
            <ol itemscope itemtype="https://schema.org/BreadcrumbList" style="list-style: none; display: flex; gap: 0.5rem; padding: 1rem 0; margin-left: 0;">
                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a itemprop="item" href="/">
                        <span itemprop="name">Home</span>
                    </a>
                    <meta itemprop="position" content="1" />
                </li>
                <li aria-hidden="true">/</li>
                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a itemprop="item" href="/tutorials">
                        <span itemprop="name">Tutorials</span>
                    </a>
                    <meta itemprop="position" content="2" />
                </li>
                <li aria-hidden="true">/</li>
                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <span itemprop="name">SPDK NVMe-oF Setup</span>
                    <meta itemprop="position" content="3" />
                </li>
            </ol>
        </nav>
        
        <article itemscope itemtype="https://schema.org/TechArticle">
        <meta itemprop="headline" content="SPDK NVMe-oF Target Setup Guide for Ubuntu with RDMA">
        <meta itemprop="description" content="Complete step-by-step guide to configure SPDK NVMe over Fabrics target on Ubuntu Linux with RDMA transport">
        <meta itemprop="datePublished" content="2025-10-10">
        <meta itemprop="dateModified" content="2025-10-10">
        <meta itemprop="author" content="Storage Administrator">
        
        <section id="introduction">
            <h2>Introduction</h2>
            <p>This guide walks you through setting up an NVMe over Fabrics (NVMe-oF) target using the Storage Performance Development Kit (SPDK) on Ubuntu Linux. The configuration uses RDMA (Remote Direct Memory Access) as the transport protocol for high-performance, low-latency storage access.</p>
            
            <div class="alert alert-info">
                <strong>Note:</strong> This guide assumes you have RDMA-capable network hardware (InfiniBand or RoCE) properly installed in your system.
            </div>
        </section>
        
        <section id="prerequisites">
            <h2><span class="step-number">1</span>Prerequisites and System Setup</h2>
            
            <h3>Install Required Packages</h3>
            <pre><code>sudo apt-get update
```

sudo apt-get install -y   
build-essential   
git   
pkg-config   
libaio-dev   
libssl-dev   
libnuma-dev   
libpcap-dev   
python3   
python3-pip   
rdma-core   
libibverbs-dev   
librdmacm-dev   
ibverbs-utils   
infiniband-diags</code></pre>

```
            <h3>Load RDMA Kernel Modules</h3>
            <pre><code>sudo modprobe rdma_cm
```

sudo modprobe ib_uverbs
sudo modprobe rdma_ucm
sudo modprobe ib_umad</code></pre>

```
            <h3>Enable RDMA Modules on Boot</h3>
            <pre><code>cat &lt;&lt; 'EOF' | sudo tee /etc/modules-load.d/rdma.conf
```

rdma_cm
ib_uverbs
rdma_ucm
ib_umad
EOF</code></pre>

```
            <h3>Configure Hugepages</h3>
            <p>SPDK requires hugepages for optimal performance:</p>
            <pre><code>echo 2048 | sudo tee /proc/sys/vm/nr_hugepages</code></pre>
            
            <div class="alert alert-warning">
                <strong>Important:</strong> Adjust the hugepage count based on your system's RAM and requirements. Each 2MB hugepage requires 2MB of system memory.
            </div>
        </section>
        
        <section id="build">
            <h2><span class="step-number">2</span>Download and Build SPDK</h2>
            
            <h3>Clone SPDK Repository</h3>
            <pre><code>cd /opt
```

sudo git clone https://github.com/spdk/spdk
cd spdk
sudo git submodule update –init</code></pre>

```
            <h3>Install Python Dependencies</h3>
            <pre><code>sudo pip3 install -r scripts/pkgdep/requirements.txt</code></pre>
            
            <h3>Configure and Build</h3>
            <pre><code># Configure SPDK with RDMA support
```

sudo ./configure –with-rdma

# Build SPDK (using all available CPU cores)

sudo make -j$(nproc)

# Setup SPDK environment (hugepages and drivers)

sudo scripts/setup.sh</code></pre>

```
            <div class="alert alert-success">
                <strong>Tip:</strong> The build process may take 10-15 minutes depending on your system.
            </div>
        </section>
        
        <section id="configuration">
            <h2><span class="step-number">3</span>Configuration</h2>
            
            <h3>Option A: JSON Configuration File</h3>
            <p>Create a declarative configuration file for the NVMe-oF target:</p>
            
            <pre><code>cat &lt;&lt; 'EOF' | sudo tee /opt/spdk/nvmf_target.json
```

{
“subsystems”: [
{
“subsystem”: “bdev”,
“config”: [
{
“method”: “bdev_malloc_create”,
“params”: {
“name”: “Malloc0”,
“num_blocks”: 131072,
“block_size”: 4096
}
}
]
},
{
“subsystem”: “nvmf”,
“config”: [
{
“method”: “nvmf_create_transport”,
“params”: {
“trtype”: “RDMA”,
“max_queue_depth”: 128,
“max_qpairs_per_ctrlr”: 64,
“in_capsule_data_size”: 4096,
“max_io_size”: 131072,
“io_unit_size”: 131072,
“max_aq_depth”: 128,
“num_shared_buffers”: 4095,
“buf_cache_size”: 64
}
},
{
“method”: “nvmf_create_subsystem”,
“params”: {
“nqn”: “nqn.2024-10.io.spdk:cnode1”,
“allow_any_host”: true,
“serial_number”: “SPDK00000000000001”,
“model_number”: “SPDK_Controller1”,
“max_namespaces”: 32
}
},
{
“method”: “nvmf_subsystem_add_ns”,
“params”: {
“nqn”: “nqn.2024-10.io.spdk:cnode1”,
“namespace”: {
“nsid”: 1,
“bdev_name”: “Malloc0”
}
}
},
{
“method”: “nvmf_subsystem_add_listener”,
“params”: {
“nqn”: “nqn.2024-10.io.spdk:cnode1”,
“listen_address”: {
“trtype”: “RDMA”,
“adrfam”: “IPv4”,
“traddr”: “192.168.1.100”,
“trsvcid”: “4420”
}
}
}
]
}
]
}
EOF</code></pre>

```
            <div class="alert alert-warning">
                <strong>Customization Required:</strong> Replace <code>192.168.1.100</code> with your RDMA interface IP address.
            </div>
            
            <h3>Option B: RPC-Based Configuration Script</h3>
            <p>Alternatively, use RPC commands for dynamic configuration:</p>
            
            <pre><code>cat &lt;&lt; 'EOF' | sudo tee /opt/spdk/setup_nvmf_target.sh
```

#!/bin/bash
SPDK_DIR=”/opt/spdk”
RPC_SOCK=”/var/tmp/spdk.sock”

# Wait for SPDK target to be ready

sleep 5

# Create block devices (malloc bdevs for testing)

$SPDK_DIR/scripts/rpc.py -s $RPC_SOCK bdev_malloc_create -b Malloc0 512 4096

# Create RDMA transport

$SPDK_DIR/scripts/rpc.py -s $RPC_SOCK nvmf_create_transport   
-t RDMA   
-q 128   
-p 64   
-c 4096   
-m 131072   
-u 131072

# Create NVMe-oF subsystem

$SPDK_DIR/scripts/rpc.py -s $RPC_SOCK nvmf_create_subsystem   
nqn.2024-10.io.spdk:cnode1   
-a   
-s SPDK00000000000001   
-m SPDK_Controller1

# Add namespace to subsystem

$SPDK_DIR/scripts/rpc.py -s $RPC_SOCK nvmf_subsystem_add_ns   
nqn.2024-10.io.spdk:cnode1   
Malloc0

# Add RDMA listener

$SPDK_DIR/scripts/rpc.py -s $RPC_SOCK nvmf_subsystem_add_listener   
nqn.2024-10.io.spdk:cnode1   
-t RDMA   
-a 192.168.1.100   
-f IPv4   
-s 4420

echo “NVMe-oF target configured successfully”
EOF

sudo chmod +x /opt/spdk/setup_nvmf_target.sh</code></pre>

```
            <h3>Using Real NVMe Devices</h3>
            <p>For production environments, replace malloc bdevs with actual NVMe devices:</p>
            <pre><code># Find your NVMe device PCIe address
```

lspci | grep -i nvme

# Example: Attach NVMe device at PCIe address 0000:01:00.0

$SPDK_DIR/scripts/rpc.py -s $RPC_SOCK bdev_nvme_attach_controller   
-b Nvme0   
-t PCIe   
-a 0000:01:00.0</code></pre>
</section>

```
        <section id="service">
            <h2><span class="step-number">4</span>Systemd Service Configuration</h2>
            
            <h3>Create Service File</h3>
            <pre><code>cat &lt;&lt; 'EOF' | sudo tee /etc/systemd/system/spdk-nvmf-target.service
```

[Unit]
Description=SPDK NVMe-oF Target
After=network.target

[Service]
Type=simple
ExecStartPre=/opt/spdk/scripts/setup.sh
ExecStart=/opt/spdk/build/bin/nvmf_tgt -m 0x3 -s 512
ExecStartPost=/opt/spdk/setup_nvmf_target.sh
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF</code></pre>

```
            <h3>Enable and Start Service</h3>
            <pre><code># Reload systemd configuration
```

sudo systemctl daemon-reload

# Enable service to start on boot

sudo systemctl enable spdk-nvmf-target.service

# Start the service

sudo systemctl start spdk-nvmf-target.service

# Check service status

sudo systemctl status spdk-nvmf-target.service</code></pre>
</section>

```
        <section id="network">
            <h2><span class="step-number">5</span>Network Configuration</h2>
            
            <h3>Configure RDMA Interface</h3>
            <p>Set up your RDMA-capable network interface using Netplan:</p>
            
            <pre><code>cat &lt;&lt; 'EOF' | sudo tee /etc/netplan/60-rdma.yaml
```

network:
version: 2
ethernets:
ens1f0:  # Replace with your RDMA interface name
addresses:
- 192.168.1.100/24
mtu: 9000
optional: true
EOF

sudo netplan apply</code></pre>

```
            <div class="alert alert-warning">
                <strong>Important:</strong> Replace <code>ens1f0</code> with your actual RDMA interface name and adjust the IP address accordingly.
            </div>
            
            <h3>Verify RDMA Setup</h3>
            <pre><code># List RDMA devices
```

ibv_devices

# Display detailed RDMA device information

ibv_devinfo

# Check RDMA link status

ibstat</code></pre>
</section>

```
        <section id="client">
            <h2><span class="step-number">6</span>Client Connection</h2>
            
            <h3>Install NVMe-CLI on Client</h3>
            <p>On the initiator/client host, install nvme-cli:</p>
            <pre><code>sudo apt-get install -y nvme-cli</code></pre>
            
            <h3>Discover NVMe-oF Targets</h3>
            <pre><code>sudo nvme discover -t rdma -a 192.168.1.100 -s 4420</code></pre>
            
            <h3>Connect to Target</h3>
            <pre><code>sudo nvme connect -t rdma \
-n nqn.2024-10.io.spdk:cnode1 \
-a 192.168.1.100 \
-s 4420</code></pre>
            
            <h3>Verify Connection</h3>
            <pre><code># List all NVMe devices
```

sudo nvme list

# Show NVMe-oF connections

sudo nvme list-subsys</code></pre>

```
            <h3>Disconnect from Target</h3>
            <pre><code>sudo nvme disconnect -n nqn.2024-10.io.spdk:cnode1</code></pre>
            
            <h3>Format and Mount (Optional)</h3>
            <pre><code># Format the NVMe namespace (WARNING: destroys data!)
```

sudo mkfs.ext4 /dev/nvme0n1

# Create mount point

sudo mkdir -p /mnt/nvmeof

# Mount the device

sudo mount /dev/nvme0n1 /mnt/nvmeof</code></pre>
</section>

```
        <section id="monitoring">
            <h2><span class="step-number">7</span>Monitoring and Management</h2>
            
            <h3>Create Monitoring Script</h3>
            <pre><code>cat &lt;&lt; 'EOF' &gt; /opt/spdk/monitor_target.sh
```

#!/bin/bash
RPC_SOCK=”/var/tmp/spdk.sock”

echo “=== Block Devices ===”
/opt/spdk/scripts/rpc.py -s $RPC_SOCK bdev_get_bdevs

echo -e “\n=== NVMe-oF Subsystems ===”
/opt/spdk/scripts/rpc.py -s $RPC_SOCK nvmf_get_subsystems

echo -e “\n=== Transport Statistics ===”
/opt/spdk/scripts/rpc.py -s $RPC_SOCK nvmf_get_stats

echo -e “\n=== Connected Hosts ===”
/opt/spdk/scripts/rpc.py -s $RPC_SOCK nvmf_subsystem_get_qpairs
EOF

chmod +x /opt/spdk/monitor_target.sh</code></pre>

```
            <h3>Run Monitoring</h3>
            <pre><code>/opt/spdk/monitor_target.sh</code></pre>
            
            <h3>Common Management Commands</h3>
            <div class="command-group">
                <div class="command-title">List all block devices:</div>
                <pre><code>/opt/spdk/scripts/rpc.py -s /var/tmp/spdk.sock bdev_get_bdevs</code></pre>
            </div>
            
            <div class="command-group">
                <div class="command-title">List NVMe-oF subsystems:</div>
                <pre><code>/opt/spdk/scripts/rpc.py -s /var/tmp/spdk.sock nvmf_get_subsystems</code></pre>
            </div>
            
            <div class="command-group">
                <div class="command-title">View I/O statistics:</div>
                <pre><code>/opt/spdk/scripts/rpc.py -s /var/tmp/spdk.sock nvmf_get_stats</code></pre>
            </div>
        </section>
        
        <section id="troubleshooting">
            <h2>Troubleshooting</h2>
            
            <h3>SPDK Target Won't Start</h3>
            <ul>
                <li>Check if hugepages are configured: <code>cat /proc/meminfo | grep Huge</code></li>
                <li>Verify RDMA modules are loaded: <code>lsmod | grep rdma</code></li>
                <li>Check system logs: <code>sudo journalctl -u spdk-nvmf-target.service</code></li>
            </ul>
            
            <h3>Client Cannot Connect</h3>
            <ul>
                <li>Verify RDMA connectivity: <code>ibstat</code></li>
                <li>Check firewall rules allow RDMA traffic</li>
                <li>Ensure IP addresses match between configuration and network setup</li>
                <li>Verify the target is listening: <code>netstat -an | grep 4420</code></li>
            </ul>
            
            <h3>Performance Issues</h3>
            <ul>
                <li>Increase the number of hugepages</li>
                <li>Adjust CPU core mask in the service file</li>
                <li>Tune RDMA transport parameters in the configuration</li>
                <li>Enable MTU 9000 (jumbo frames) on RDMA interfaces</li>
            </ul>
        </section>
        
        <section id="notes">
            <h2>Important Notes</h2>
            
            <div class="alert alert-warning">
                <h3>Production Considerations</h3>
                <ul>
                    <li><strong>Security:</strong> Change <code>allow_any_host: true</code> to specific host authentication for production</li>
                    <li><strong>Storage:</strong> Use real NVMe devices instead of malloc bdevs</li>
                    <li><strong>Performance:</strong> Adjust CPU masks and memory allocation based on workload</li>
                    <li><strong>Network:</strong> Ensure dedicated RDMA network with proper MTU settings</li>
                    <li><strong>Monitoring:</strong> Implement proper logging and alerting for the service</li>
                </ul>
            </div>
            
            <div class="alert alert-info">
                <h3>Key Parameters to Customize</h3>
                <ul>
                    <li><strong>IP Address:</strong> 192.168.1.100 → Your RDMA interface IP</li>
                    <li><strong>Interface Name:</strong> ens1f0 → Your RDMA NIC name</li>
                    <li><strong>NQN:</strong> nqn.2024-10.io.spdk:cnode1 → Your unique identifier</li>
                    <li><strong>CPU Mask:</strong> -m 0x3 → Adjust based on your CPU topology</li>
                    <li><strong>Memory:</strong> -s 512 → Adjust based on your system RAM</li>
                </ul>
            </div>
        </section>
        
        <section id="faq" itemscope itemtype="https://schema.org/FAQPage">
            <h2>Frequently Asked Questions</h2>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">What is SPDK NVMe-oF?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>SPDK (Storage Performance Development Kit) NVMe-oF (NVMe over Fabrics) is a high-performance storage solution that allows NVMe storage devices to be accessed over network fabrics using protocols like RDMA, TCP, or Fibre Channel. It provides near-local NVMe performance over the network with extremely low latency.</p>
                    </div>
                </div>
            </div>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">What are the hardware requirements for SPDK NVMe-oF with RDMA?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>You need: (1) RDMA-capable network interface cards (InfiniBand or RoCE), (2) At least 8GB of RAM for hugepages, (3) Multi-core CPU (4+ cores recommended), (4) NVMe storage devices or test with malloc bdevs, and (5) Ubuntu Linux 20.04 or newer.</p>
                    </div>
                </div>
            </div>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">How do I verify RDMA is working correctly?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>Run the following commands: <code>ibv_devices</code> to list RDMA devices, <code>ibv_devinfo</code> for detailed device information, and <code>ibstat</code> to check link status. All should return valid RDMA device information if properly configured.</p>
                    </div>
                </div>
            </div>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">Can I use SPDK NVMe-oF without RDMA?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>Yes, SPDK NVMe-oF supports multiple transports including TCP (which works over standard Ethernet), RDMA, and Fibre Channel. TCP transport is easier to set up but provides lower performance compared to RDMA. Simply change the transport type in the configuration from "RDMA" to "TCP".</p>
                    </div>
                </div>
            </div>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">What is the difference between malloc bdev and real NVMe devices?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>Malloc bdevs are RAM-based virtual block devices used for testing and development. They're fast but volatile and limited by RAM size. Real NVMe devices are physical SSDs that provide persistent storage and higher capacity. For production, always use real NVMe devices.</p>
                    </div>
                </div>
            </div>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">How many hugepages should I configure?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>The recommended starting point is 2048 hugepages (4GB) for basic setups. For production environments with high I/O workloads, allocate 4096-8192 hugepages (8-16GB). Each 2MB hugepage requires 2MB of system RAM. Adjust based on your available memory and workload requirements.</p>
                    </div>
                </div>
            </div>
            
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">What ports does NVMe-oF use?</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <div itemprop="text">
                        <p>The default NVMe-oF service port is 4420. For RDMA transport, this port must be accessible on your RDMA network interface. You can customize this port in the listener configuration if needed for your network setup.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="references">
            <h2>Additional Resources</h2>
            <ul>
                <li><a href="https://spdk.io/doc/" target="_blank" rel="noopener noreferrer">SPDK Documentation</a></li>
                <li><a href="https://spdk.io/doc/nvmf.html" target="_blank" rel="noopener noreferrer">SPDK NVMe-oF Target Guide</a></li>
                <li><a href="https://github.com/spdk/spdk" target="_blank" rel="noopener noreferrer">SPDK GitHub Repository</a></li>
                <li><a href="https://nvmexpress.org/" target="_blank" rel="noopener noreferrer">NVMe Specifications</a></li>
            </ul>
        </section>
        </article>
    </main>
    
    <footer role="contentinfo">
        <p>SPDK NVMe-oF Target Setup Guide | Last Updated: <time datetime="2025-10-10">October 2025</time></p>
        <p><small>Optimized for high-performance storage configuration with RDMA transport</small></p>
        <p><small>Keywords: SPDK, NVMe-oF, NVMe over Fabrics, RDMA, InfiniBand, RoCE, Ubuntu Linux, High-Performance Storage</small></p>
        <hr style="margin: 2rem 0; border: none; border-top: 1px solid rgba(255,255,255,0.2);">
        <p>&copy; 2025 Darren Soothill. All rights reserved.</p>
        <p><small>Contact: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#100;&#97;&#114;&#114;&#101;&#110;&#64;&#115;&#111;&#111;&#116;&#104;&#105;&#108;&#108;&#46;&#99;&#111;&#109;" style="color: #b8c5ff; text-decoration: none;">&#100;&#97;&#114;&#114;&#101;&#110;&#64;&#115;&#111;&#111;&#116;&#104;&#105;&#108;&#108;&#46;&#99;&#111;&#109;</a></small></p>
    </footer>
</div>

<!-- 
SEO IMPLEMENTATION CHECKLIST:

✓ Meta tags (title, description, keywords)
✓ Open Graph tags for social media
✓ Twitter Card tags
✓ Canonical URL
✓ Structured data (JSON-LD): Article, HowTo, FAQ, Breadcrumb
✓ Semantic HTML5 (article, section, nav, header, footer)
✓ Skip to content link for accessibility
✓ Proper heading hierarchy (h1 → h2 → h3)
✓ Alt text considerations (add when using images)
✓ Internal linking structure
✓ External links with rel="noopener noreferrer"
✓ Mobile responsive design
✓ Fast loading (inline CSS)

TODO BEFORE PUBLISHING:
□ Update all "example.com" URLs to your actual domain
□ Add actual image URLs for social media previews
□ Create and submit XML sitemap
□ Configure robots.txt file
□ Set up Google Search Console
□ Add Google Analytics tracking code (optional)
□ Test with Google Rich Results Test tool
□ Validate structured data with Schema.org validator
□ Check mobile-friendliness with Google Mobile-Friendly Test
□ Optimize page load speed (already optimized with inline CSS)
□ Add actual breadcrumb navigation if part of larger site

RECOMMENDED robots.txt content:
User-agent: *
Allow: /
Sitemap: https://example.com/sitemap.xml
-->
```

</body>
</html>