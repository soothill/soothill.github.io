<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Cookie Consent - Must be first to control other scripts -->
    <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="1e68391f-38dc-4335-b7ab-794dd9aa4e59" data-blockingmode="auto" type="text/javascript"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Preconnect to external resources for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com">

    <!-- Google Fonts - Inter & Fira Code -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <title>Useful Commands - Darren Soothill</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Essential Linux commands for system administrators including FIO benchmarking, Smartmontools disk health monitoring, SSH legacy algorithm fixes, storage testing, SMART monitoring setup, automated email alerts, and performance testing. Copy-paste ready commands with detailed explanations.">
    <meta name="keywords" content="Linux commands, FIO commands, smartmontools, SMART monitoring, SSH legacy algorithms, disk health monitoring, storage benchmarking, NVMe testing, system administration commands, Darren Soothill">
    <meta name="author" content="Darren Soothill">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.darrensoothill.io/useful-commands.html">

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Useful Linux Commands - FIO, Smartmontools, SSH & Storage Testing - Darren Soothill">
    <meta property="og:description" content="Practical Linux commands for system administrators. Includes FIO benchmarking, Smartmontools SMART monitoring with automated alerts, SSH legacy algorithm fixes, and storage testing commands.">
    <meta property="og:url" content="https://www.darrensoothill.io/useful-commands.html">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Useful Linux Commands - FIO, Smartmontools, SSH & Storage Testing">
    <meta name="twitter:description" content="Essential Linux commands for system administrators with FIO benchmarking, Smartmontools disk health monitoring, SSH connection fixes, and storage testing.">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechArticle",
      "headline": "Useful Linux Commands for System Administration",
      "description": "Collection of practical Linux commands for system administrators including FIO benchmarking, Smartmontools disk health monitoring with automated email alerts, SSH legacy algorithm fixes, and storage testing",
      "author": {
        "@type": "Person",
        "name": "Darren Soothill"
      },
      "datePublished": "2025-01-11",
      "dateModified": "2025-10-19",
      "url": "https://www.darrensoothill.io/useful-commands.html",
      "keywords": "Linux, FIO, smartmontools, SMART monitoring, SSH, storage benchmarking, system administration"
    }
    </script>

    <!-- Google tag (gtag.js) - Controlled by Cookiebot -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4KVJSXV6TK" data-cookieconsent="statistics"></script>
    <script data-cookieconsent="statistics">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4KVJSXV6TK');
    </script>

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="assets/css/main.css">

    <!-- Page-specific styles -->
    <style>
        /* Expandable Command Sections */
        .command-item {
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            margin-bottom: 1.5rem;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-base);
        }

        .command-item:hover {
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
            border-color: var(--primary-light);
            transform: translateY(-2px);
        }

        .command-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            transition: all var(--transition-base);
        }

        .command-header:hover {
            filter: brightness(1.1);
        }

        .command-header h2 {
            color: white;
            margin: 0;
            padding: 0;
            border: none;
            font-size: 1.5rem;
        }

        .command-header .toggle-icon {
            font-size: 1.5rem;
            font-weight: bold;
            transition: transform var(--transition-base);
        }

        .command-header.active .toggle-icon {
            transform: rotate(180deg);
        }

        .command-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .command-content.active {
            max-height: 10000px;
        }

        .command-content-inner {
            padding: 2rem;
        }

        .subsection {
            margin-bottom: 2.5rem;
        }

        /* Info, Warning, Success boxes */
        .warning {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.15) 0%, rgba(255, 193, 7, 0.05) 100%);
            border-left: 4px solid #ffc107;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .warning h4 {
            color: #ffc107;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .info {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%);
            border-left: 4px solid var(--secondary);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .info h4 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .info ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .info li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%);
            border-left: 4px solid #10b981;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .success h4 {
            color: #10b981;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .success ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .success li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .intro {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(6, 182, 212, 0.1) 100%);
            border-left: 4px solid var(--primary-light);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
        }

        .intro h2 {
            color: var(--primary-light);
            margin-bottom: 0.5rem;
            border: none;
            padding: 0;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="site-header">
        <div class="container" style="background: transparent; border: none; box-shadow: none; padding: 0 2rem; margin: 0; max-width: 100%;">
            <a href="/" class="site-title">Darren Soothill</a>
            <nav class="site-nav" aria-label="Main navigation">
                <ul>
                    <li><a href="index.html#home">Home</a></li>
                    <li><a href="index.html#documents">Documents</a></li>
                    <li><a href="resources.html">Resources</a></li>
                    <li><a href="useful-commands.html">Useful Commands</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content">
        <div class="container">
            <section class="hero">
                <h1>Useful <span class="gradient-text">Commands</span></h1>
                <p>A collection of practical Linux commands for system administration and testing</p>
            </section>
        </div>

        <section class="section reveal">
            <div class="intro">
                <h2>About This Page</h2>
                <p>This page contains a curated collection of useful Linux commands for system administration, performance testing, and troubleshooting. Click on any command section below to expand and view detailed examples and explanations.</p>
            </div>

            <!-- FIO Command -->
            <div class="command-item">
                <div class="command-header" onclick="toggleCommand(this)">
                    <h2>FIO (Flexible I/O Tester)</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="command-content">
                    <div class="command-content-inner">
                        <p>FIO is a versatile tool for benchmarking and testing storage devices. It provides comprehensive I/O performance testing capabilities with extensive configuration options.</p>

                        <div class="subsection">
                            <h3>Installation</h3>
                            <pre><code># Install FIO on Ubuntu/Debian
sudo apt update
sudo apt install fio

# Install FIO on RHEL/CentOS
sudo yum install fio

# Verify installation
fio --version</code></pre>
                        </div>

                        <div class="subsection">
                            <h3>Fill a Disk</h3>
                            <p>Use FIO to fill a disk with data for testing purposes.</p>

                            <h4>Sequential Write (Fastest)</h4>
                            <pre><code># Fill entire disk with sequential writes
sudo fio --name=filltest --filename=/dev/nvme0n1 --rw=write --bs=1M --direct=1 --size=100% --numjobs=1

# Fill with larger block size for maximum speed
sudo fio --name=filltest --filename=/dev/nvme0n1 --rw=write --bs=4M --direct=1 --size=100% --numjobs=1</code></pre>

                            <h4>Random Write (More Realistic)</h4>
                            <pre><code># Fill disk with random data (more realistic workload)
sudo fio --name=filltest --filename=/dev/nvme0n1 --rw=randwrite --bs=4k --direct=1 --size=100% --numjobs=1

# Fill with multiple jobs for parallel writes
sudo fio --name=filltest --filename=/dev/nvme0n1 --rw=randwrite --bs=4k --direct=1 --size=100% --numjobs=4</code></pre>

                            <div class="warning">
                                <h4>‚ö†Ô∏è Data Loss Warning</h4>
                                <p><strong>CRITICAL:</strong> The commands above will <strong>PERMANENTLY OVERWRITE ALL DATA</strong> on the specified device. Always double-check the device path before running these commands.</p>
                            </div>

                            <div class="info">
                                <h4>FIO Parameters Explained</h4>
                                <ul>
                                    <li><strong>--name:</strong> Job name for identification in output</li>
                                    <li><strong>--filename:</strong> Device or file to test</li>
                                    <li><strong>--rw:</strong> I/O pattern - write, randwrite, read, randread</li>
                                    <li><strong>--bs:</strong> Block size - 4k, 1M, etc.</li>
                                    <li><strong>--direct:</strong> Use direct I/O (1 = bypass OS cache)</li>
                                    <li><strong>--size:</strong> Amount of data - 100%, 50G, etc.</li>
                                    <li><strong>--numjobs:</strong> Number of parallel jobs</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3>Additional FIO Examples</h3>

                            <h4>Random Read Performance Test</h4>
                            <pre><code># Test random read performance
sudo fio --name=randread --filename=/dev/nvme0n1 --rw=randread --bs=4k --direct=1 --numjobs=4 --time_based --runtime=60</code></pre>

                            <h4>Mixed Workload Test</h4>
                            <pre><code># 70% read, 30% write mixed workload
sudo fio --name=mixed --filename=/dev/nvme0n1 --rw=randrw --rwmixread=70 --bs=4k --direct=1 --numjobs=4 --time_based --runtime=60</code></pre>
                        </div>

                        <div class="success">
                            <h4>‚úì Best Practices</h4>
                            <ul>
                                <li>Always verify device paths using <code>lsblk</code> before running write operations</li>
                                <li>Unmount any mounted partitions before testing</li>
                                <li>Use <code>--direct=1</code> to bypass OS cache for accurate results</li>
                                <li>Start with small test sizes before running full disk operations</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smartmontools Command -->
            <div class="command-item">
                <div class="command-header" onclick="toggleCommand(this)">
                    <h2>Smartmontools - Disk Health Monitoring</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="command-content">
                    <div class="command-content-inner">
                        <p>Smartmontools is a suite of utilities for monitoring and analyzing the health of storage devices using SMART (Self-Monitoring, Analysis and Reporting Technology).</p>

                        <div class="subsection">
                            <h3>Installation</h3>
                            <pre><code># Install on Ubuntu/Debian
sudo apt update
sudo apt install smartmontools

# Install on RHEL/CentOS
sudo yum install smartmontools

# Verify installation
smartctl --version</code></pre>
                        </div>

                        <div class="subsection">
                            <h3>Setting Up Automatic Monitoring</h3>
                            <p>Configure smartd to automatically detect all devices and send email alerts.</p>

                            <h4>Configure smartd Daemon</h4>
                            <pre><code># Backup original configuration
sudo cp /etc/smartd.conf /etc/smartd.conf.backup

# Edit configuration file
sudo nano /etc/smartd.conf</code></pre>

                            <h4>Add Configuration</h4>
                            <pre><code># Monitor all devices, run short self-test daily, long test weekly
# Send email alerts on any SMART errors
DEVICESCAN -a -o on -S on -s (S/../.././02|L/../../6/03) -m darren@soothill.com -M exec /usr/share/smartmontools/smartd-runner</code></pre>

                            <h4>Enable and Start smartd</h4>
                            <pre><code># Enable smartd to start on boot
sudo systemctl enable smartd

# Start smartd service
sudo systemctl start smartd

# Check service status
sudo systemctl status smartd</code></pre>
                        </div>

                        <div class="subsection">
                            <h3>Manual Device Testing</h3>
                            <pre><code># Check if SMART is available and enabled
sudo smartctl -i /dev/sda

# Check overall health status
sudo smartctl -H /dev/sda

# View all SMART attributes
sudo smartctl -A /dev/sda

# Start a short self-test
sudo smartctl -t short /dev/sda

# Start a long self-test
sudo smartctl -t long /dev/sda

# View self-test results
sudo smartctl -l selftest /dev/sda</code></pre>
                        </div>

                        <div class="success">
                            <h4>‚úì Best Practices</h4>
                            <ul>
                                <li>Test email functionality with <code>-M test</code> before relying on alerts</li>
                                <li>Use <code>-M diminishing</code> to avoid alert fatigue</li>
                                <li>Schedule long tests during off-peak hours</li>
                                <li>Monitor smartd logs: <code>sudo journalctl -u smartd</code></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SSH Connection Fix -->
            <div class="command-item">
                <div class="command-header" onclick="toggleCommand(this)">
                    <h2>SSH Connection Fix - Legacy Algorithms</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="command-content">
                    <div class="command-content-inner">
                        <p>Fix SSH connection issues with legacy servers that use outdated key exchange and host key algorithms.</p>

                        <div class="subsection">
                            <h3>Common Error Messages</h3>
                            <pre><code>Unable to negotiate with 10.10.201.2 port 22: no matching key exchange method found.
Their offer: diffie-hellman-group1-sha1,diffie-hellman-group14-sha1

Unable to negotiate with 10.10.201.2 port 22: no matching host key type found.
Their offer: ssh-rsa</code></pre>
                        </div>

                        <div class="subsection">
                            <h3>Quick Fix (One-time Connection)</h3>
                            <pre><code>ssh -oKexAlgorithms=+diffie-hellman-group14-sha1 -oHostKeyAlgorithms=+ssh-rsa user@10.10.201.2</code></pre>

                            <h4>Alternative with Additional Legacy Support</h4>
                            <pre><code>ssh -oKexAlgorithms=+diffie-hellman-group14-sha1,diffie-hellman-group1-sha1 \
    -oHostKeyAlgorithms=+ssh-rsa \
    -oPubkeyAcceptedKeyTypes=+ssh-rsa \
    user@10.10.201.2</code></pre>
                        </div>

                        <div class="subsection">
                            <h3>Permanent Fix (SSH Config)</h3>
                            <p>Add to <code>~/.ssh/config</code>:</p>
                            <pre><code># For specific host
Host 10.10.201.2
    KexAlgorithms +diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
    HostKeyAlgorithms +ssh-rsa
    PubkeyAcceptedKeyTypes +ssh-rsa

# For entire subnet
Host 10.10.201.*
    KexAlgorithms +diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
    HostKeyAlgorithms +ssh-rsa
    PubkeyAcceptedKeyTypes +ssh-rsa</code></pre>

                            <h4>Create SSH Config File</h4>
                            <pre><code># Create .ssh directory if it doesn't exist
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# Create or edit config file
nano ~/.ssh/config

# Set proper permissions
chmod 600 ~/.ssh/config</code></pre>
                        </div>

                        <div class="warning">
                            <h4>‚ö†Ô∏è Security Warning</h4>
                            <p><strong>Important:</strong> These algorithms are disabled by default because they have known security weaknesses:</p>
                            <ul>
                                <li><strong>diffie-hellman-group1-sha1:</strong> Vulnerable to logjam attacks</li>
                                <li><strong>ssh-rsa with SHA-1:</strong> SHA-1 hash collisions have been demonstrated</li>
                            </ul>
                            <p><strong>Only re-enable these if:</strong> You're on a trusted network, connecting to legacy equipment that cannot be updated, and you understand the risks.</p>
                        </div>

                        <div class="success">
                            <h4>‚úì Best Practices</h4>
                            <ul>
                                <li>Use SSH config file for regular connections</li>
                                <li>Limit legacy algorithm support to specific hosts</li>
                                <li>Document why you need legacy support</li>
                                <li>Use VPN when accessing legacy systems over untrusted networks</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Placeholder for future commands -->
            <div class="info">
                <h4>üìå More Commands Coming Soon</h4>
                <p>Additional useful commands will be added to this page. Check back regularly for updates including networking tools, monitoring commands, and more storage utilities.</p>
            </div>

        </section>
    </main>

    <footer class="site-footer">
        <p>Useful Commands | Linux System Administration</p>
        <p style="opacity: 0.8;">¬© 2025 Darren Soothill. All rights reserved.</p>
        <p style="opacity: 0.7; font-size: 0.9rem; margin-top: 0.5rem;">Last Updated: <span id="lastUpdated"></span></p>
    </footer>

    <!-- Main JavaScript -->
    <script src="assets/js/main.js" defer></script>

    <!-- Page-specific JavaScript -->
    <script>
        function toggleCommand(header) {
            header.classList.toggle('active');
            const content = header.nextElementSibling;
            content.classList.toggle('active');
        }

        // Display last updated date
        document.addEventListener('DOMContentLoaded', function() {
            const lastUpdated = new Date('2025-01-11T00:00:00');
            document.getElementById('lastUpdated').textContent = lastUpdated.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        });
    </script>
</body>
</html>